# Template file for 'st'
pkgname=st-wragdan
version=0.9.2
revision=1
build_style=gnu-makefile
make_use_env=compliant
hostmakedepends="pkg-config"
makedepends="fontconfig-devel libX11-devel libXft-devel harfbuzz-devel"
depends="ncurses st-wragdan-terminfo-${version}_${revision}"
short_desc="Simple terminal implementation for X"
maintainer="Wragdan <17775924+Wragdan@users.noreply.github.com>"
license="MIT"
homepage="https://st.suckless.org"
distfiles="https://github.com/Wragdan/st/archive/refs/heads/master.tar.gz"
checksum=4395af4193499583e0b731de684c34d98d8b58c66c3295f8f7af6a58069e5fa7

pre_build() {
	vsed -i config.h -e 's|Liberation Mono|Monospace|g'
	[ -e ${FILESDIR}/config.h ] && cp ${FILESDIR}/config.h config.h
	mkdir -p ${DESTDIR}/usr/share/terminfo
}

pre_install() {
	export TERMINFO=${DESTDIR}/usr/share/terminfo
}

post_install() {
	vdoc README.md
	vlicense LICENSE
}

st-terminfo_package() {
	short_desc+=" - terminfo data"
	pkg_install() {
		vmove usr/share/terminfo
	}
}
